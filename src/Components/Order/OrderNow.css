/* Altura base del header (desktop) + extra espacio de respiración */
:root { --order-header-offset: 140px; }

.order-now-page {
  /* Separa del header fijo: offset + 20px extra */
  padding: calc(var(--order-header-offset) + 20px) 40px 60px;
  background: linear-gradient(180deg, #e9e4da 0%, #f7f4ec 55%, #faf8f1 100%);
  min-height: 100vh;
  transition: background .6s ease;
}

/* Cart page: ligeramente más para que el primer panel no quede pegado */
.cart-page.order-now-page { padding-top: calc(var(--order-header-offset) + 45px); }

@media (max-width: 900px) {
  :root { --order-header-offset: 115px; }
  .order-now-page { padding-top: calc(var(--order-header-offset) + 10px); }
  .cart-page.order-now-page { padding-top: calc(var(--order-header-offset) + 30px); }
}

/* Estado inicial (sin scroll): fondo más oscuro para contraste con header blanco */
:root:not(.order-bg-light) .order-now-page {
  background: linear-gradient(180deg, #1e120f 0%, #fff9f7 25%, #3a241f 55%, #4b2d26 100%);
}

/* Colores del título según estado */
:root:not(.order-bg-light) .order-title { color:#f8f5f1; text-shadow:0 2px 6px rgba(0,0,0,.45); }
:root.order-bg-light .order-title { color:#2c2c2c; }
/* Cart page: siempre título negro, sin sombra */
.cart-page .order-title { color:#111 !important; text-shadow:none !important; }

.order-title {
  font-size: 2.5rem;
  font-weight: 800;
  text-align: center;
  margin: 0 0 2.5rem;
  letter-spacing: 2px;
  /* El color se gestiona por los selectores dependientes de :root arriba */
}

.order-grid { display:grid; gap:2rem; max-width:1500px; margin:0 auto; }
.order-grid.three-cols { grid-template-columns: repeat(auto-fill, minmax(430px, 1fr)); }

.order-card {
  display:grid;
  grid-template-columns: 1fr 160px; /* más texto, imagen igual */
  cursor: pointer;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  overflow: hidden;
  transition: transform .3s ease, box-shadow .3s ease;
  border: 1px solid #eee;
  position: relative;
}

.order-card:hover { transform: translateY(-4px); box-shadow:0 10px 28px rgba(0,0,0,0.08); }

.order-card-text { padding: 18px 20px 16px; display:flex; flex-direction:column; }
.order-card-text h3 { margin:0 0 10px; font-size:1.08rem; line-height:1.28; font-family:'Playfair Display', serif; }
.order-card-text p { margin:0 0 14px; font-size:.87rem; line-height:1.45; color:#444; }
/* Section headings */
.order-section { margin-bottom: 3.5rem; }
.order-section-title { font-size:2rem; margin:0 0 1.4rem; text-align:center; letter-spacing:1px; font-weight:800; position:relative; }
.order-section-title:after { content:''; position:absolute; left:50%; bottom:-10px; transform:translateX(-50%); width:90px; height:4px; background:linear-gradient(90deg,#c8102e,#f4ce14); border-radius:3px; }

@media (max-width: 1100px) { .order-grid.three-cols { grid-template-columns: repeat(auto-fill, minmax(360px, 1fr)); } }
@media (max-width: 820px) { .order-grid.three-cols { grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); } }
.order-card-text .price { font-weight:700; font-size:.9rem; margin-top:auto; letter-spacing:.5px; }

.order-card-image { position:relative; width:100%; height:100%; }
.order-card-image img { width:100%; height:100%; object-fit:cover; display:block; }
.add-inline { position:absolute; bottom:10px; right:10px; width:38px; height:38px; border-radius:50%; background:#3a241f; color:#fff; border:none; font-size:1.3rem; font-weight:400; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 10px rgba(0,0,0,.3); transition:background .3s ease, transform .3s ease; }
.add-inline:hover { background:#c8102e; transform:scale(1.05); }

/* Modal */
.order-modal { position:fixed; inset:0; z-index:150000; display:flex; align-items:center; justify-content:center; }
.modal-backdrop { position:absolute; inset:0; background:rgba(0,0,0,.55); backdrop-filter:blur(4px); }
.modal-content { position:relative; background:#fff; width:min(900px, 92%); border-radius:22px; overflow:hidden; box-shadow:0 25px 60px -10px rgba(0,0,0,.35); animation:pop .45s cubic-bezier(.34,1.56,.64,1); }
@keyframes pop { 0% { transform:scale(.85) translateY(20px); opacity:0; } 100% { transform:scale(1) translateY(0); opacity:1; } }
.close { position:absolute; top:10px; right:12px; background:transparent; border:none; font-size:2.2rem; cursor:pointer; line-height:1; color:#333; z-index:10; padding:12px 16px; }
.close:hover { color:#c8102e; }
.modal-body { display:grid; grid-template-columns: 1fr 1fr; min-height:420px; }
.modal-image img { width:100%; height:100%; object-fit:cover; }
.modal-info { padding:40px 38px 34px; display:flex; flex-direction:column; }
.modal-info h2 { margin:0 0 18px; font-size:1.7rem; font-family:'Playfair Display', serif; letter-spacing:1px; }
.modal-info p { margin:0 0 26px; line-height:1.5; font-size:.95rem; color:#333; }
.qty-control { display:flex; align-items:center; gap:34px; margin-bottom:34px; }
.qty-control button { width:76px; height:76px; border-radius:22px; border:none; background:#f4f4f4; font-size:2rem; font-weight:600; cursor:pointer; transition:background .3s ease, transform .2s; display:flex; align-items:center; justify-content:center; }
.qty-control button:hover { background:#ecebeb; }
.qty-control span { min-width:46px; text-align:center; font-size:1.6rem; font-weight:600; line-height:1; display:flex; align-items:center; justify-content:center; }
.add-btn { background:#c8102e; color:#fff; padding:18px 26px; border:none; font-size:1rem; font-weight:700; border-radius:14px; cursor:pointer; box-shadow:0 8px 24px -6px rgba(200,16,46,.45); letter-spacing:.5px; transition:background .3s ease, transform .3s ease; margin-top:auto; }
.add-btn:hover { background:#a50d26; transform:translateY(-2px); }

/* Cart */
.cart-layout { display:grid; grid-template-columns: 1fr 340px; gap:2.5rem; max-width:1400px; margin:0 auto; }
.cart-panel { background:#fff; border:1px solid #e7e5e2; border-radius:38px; padding:46px 54px 56px; box-shadow:0 14px 50px -12px rgba(0,0,0,.09); display:flex; flex-direction:column; position:relative; overflow:hidden; }
.cart-panel:before { content:''; position:absolute; inset:0; pointer-events:none; background:linear-gradient(180deg,rgba(0,0,0,0.03),transparent 120px); border-radius:38px; }
.cart-items { display:flex; flex-direction:column; gap:1.9rem; }

/* Cart page: fondo siempre claro independientemente del scroll / clase order-bg-light */
.cart-page.order-now-page,
:root:not(.order-bg-light) .cart-page.order-now-page {
  background: linear-gradient(180deg, #e9e4da 0%, #f7f4ec 55%, #faf8f1 100%) !important;
}
.cart-top-bar { display:flex; align-items:center; justify-content:space-between; padding:6px 4px 4px; }
.cart-top-title { margin:0; font-size:1.55rem; font-weight:700; letter-spacing:.5px; }
.remove-all-btn { display:inline-flex; gap:10px; align-items:center; background:transparent; border:none; font-family:inherit; font-size:.95rem; letter-spacing:1px; cursor:pointer; color:#555; padding:10px 14px; border-radius:10px; transition:color .25s ease, background .25s ease; }
.remove-all-btn svg { font-size:1.05rem; }
.remove-all-btn:hover { color:#000; background:rgba(0,0,0,.05); }
.remove-all-btn:active { transform:translateY(1px); }
.cart-item { display:flex; gap:18px; background:#fff; border:1px solid #eee; border-radius:14px; padding:14px 18px; box-shadow:0 4px 14px rgba(0,0,0,.04); }
.cart-item .thumb { width:110px; height:90px; overflow:hidden; border-radius:10px; }
.cart-item .thumb img { width:100%; height:100%; object-fit:cover; }
.cart-item .info { flex:1; display:flex; flex-direction:column; }
.cart-item h3 { margin:0 0 8px; font-size:1rem; font-family:'Playfair Display', serif; }
.controls { margin-top:auto; display:flex; align-items:center; gap:18px; }
.controls { --qty-btn:40px; --qty-pad:4px; }
.qty-mini { display:inline-flex; align-items:center; gap:12px; background:#f5f5f5; padding:var(--qty-pad) 18px; border-radius:999px; height:calc(var(--qty-btn) + var(--qty-pad)*2); }
.qty-mini button { width:var(--qty-btn); height:var(--qty-btn); border:none; background:#e8e8e8; cursor:pointer; border-radius:12px; font-size:1.05rem; font-weight:700; display:flex; align-items:center; justify-content:center; line-height:1; }
.qty-mini button:hover { background:#ddd; }
.qty-mini button, .qty-mini span { margin:0; padding:0; }
.qty-mini span { width:var(--qty-btn); height:var(--qty-btn); font-weight:600; display:flex; align-items:center; justify-content:center; line-height:1; font-size:1.05rem; transform:translateY(2px); /* ajuste óptico */ }
/* Asegura que el precio tenga misma altura y centrado óptico */
.line-price {
  font-weight:700;
  letter-spacing:.5px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:calc(var(--qty-btn) + var(--qty-pad)*2);
  line-height:calc(var(--qty-btn) + var(--qty-pad)*2); /* asegura que no haya espacio extra inferior */
  padding:0 6px;
  margin:0; /* elimina posibles márgenes colapsados */
}

/* Ajuste adicional: garantizar que ningún hijo directo de .controls aporte margen vertical inesperado */
.controls > * { margin-top:0 !important; margin-bottom:0 !important; }
.remove { background:transparent; border:none; font-size:.95rem; cursor:pointer; color:#222; display:inline-flex; align-items:center; justify-content:center; width:32px; height:32px; border-radius:8px; transition:background .25s ease, color .25s ease, transform .25s ease; }
.remove:hover { background:rgba(0,0,0,0.07); color:#000; transform:scale(1.05); }
.remove:active { transform:scale(.9); }
.cart-summary { background:#fff; border:1px solid #eee; border-radius:20px; padding:30px 28px 34px; height:fit-content; box-shadow:0 8px 26px rgba(0,0,0,.05); position:sticky; top:110px; }
.cart-summary h2 { margin:0 0 20px; font-size:1.4rem; letter-spacing:1px; }
.summary-line { display:flex; justify-content:space-between; margin:0 0 10px; font-weight:600; }
.summary-small { font-size:.75rem; color:#666; margin:6px 0 18px; }
.clear-btn, .back-btn { margin-top:12px; background:#f4f4f4; border:none; padding:12px 16px; border-radius:10px; cursor:pointer; font-weight:600; width:100%; }
.clear-btn:hover { background:#e2e2e2; }
.back-btn:hover { background:#e2e2e2; }

@media (max-width: 1000px) { .cart-layout { grid-template-columns:1fr; } .cart-summary { position:relative; top:0; } }

@media (max-width: 760px) {
  .cart-panel { padding:34px 28px 44px; border-radius:30px; }
  .cart-top-title { font-size:1.35rem; }
  .cart-items { gap:1.2rem; }
  .cart-item { flex-direction:column; }
  .cart-item .thumb { width:100%; height:180px; }
  .controls { flex-wrap:wrap; gap:14px; }
  .line-price { order:3; }
}

/* Header badge animation (rely on button text) */
.order-now-btn { position:relative; }
.order-now-btn[data-has-items="true"] { animation:pulse 2.2s ease-in-out infinite; }
@keyframes pulse { 0%,100%{ box-shadow:0 0 0 0 rgba(200,16,46,0.6);} 50%{ box-shadow:0 0 0 10px rgba(200,16,46,0); } }

@media (max-width: 860px) {
  .modal-body { grid-template-columns:1fr; }
  .modal-image { height:240px; }
  .modal-info { padding:28px 26px 30px; }
}

@media (max-width: 600px) {
  :root { --order-header-offset: 90px; }
  .order-now-page { padding: calc(var(--order-header-offset) + 10px) 18px 50px; }
  .cart-page.order-now-page { padding-top: calc(var(--order-header-offset) + 28px); }
  .order-grid { gap:1.2rem; }
  .order-card { grid-template-columns:1fr 120px; }
  .order-card-text h3 { font-size:.95rem; }
}
